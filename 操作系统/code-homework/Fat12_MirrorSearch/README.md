# Fat12_MirrorSearch
用C++和nasm编写一个FAT12镜像查看工具，读取一个.img格式的文件并响应用户输入。

## 功能列表

1. 运行程序后，读取FAT12镜像文件，并提示用户输入指令
2. 用户输入ls 路径，输出根目录及其子目录的文件和目录列表。
   1. 首先输出路径名，加一个冒号:，换行，再输出文件和目录列表;
   2.  使用红色(\033[31m)颜色输出目录的文件名，不添加特殊颜色输出文件的文件名。
   3. 当用户不添加任何选项执行ls命令时，每个文件/目录项之前用两个空格隔开
   4. 当用户添加-l为参数时
      1.  在路径名后，冒号前，另输出此目录下直接子目录和直接子文件的数目，两个数字之间用 空格连接。此两个数字不添加特殊颜色
      2.  每个文件/目录占据一行，在输出文件/目录名后，空一格，之后:
         1. 若项为目录，输出此目录下直接子目录和直接子文件的数目，两个数字之间用空格连接。此两个数字不添加特殊颜色
            1. 不输出.和..目录的子目录、子文件数目
         2. 若项为文件，输出文件的大小
      3. 对于-l参数用户可以在命令任何位置、设置任意多次-l参数，但只能设置一次文件名
      4. 直接子目录不计算.和..
      5. 当用户给出不支持的命令参数时，报错
      6. 当用户不设定路径时，默认路径为镜像文件根目录
3. 用户输入cat 文件名，输出路径对应文件的内容， 若路径不存在或不是一个普通文件则给出提示，提示内容不严格限定，但必须体现出错误所在。 
4. 用户输入exit， 退出程序。

## 常见问题

- 以下命令均等价于ls /NJU -l: 
  - ls -l /NJU
  - ls -ll /NJU
  - ls -l /NJU -ll
- 以下命令为出错:
  - ls -L /NJU
  - ls -al /NJU
  - ls /NJU -lL
  - ls /NJU /NJU
- 直接子文件/目录即不计算自己的子目录的子文件/目录的数量 
- ls中列出多个目录时，其顺序不做规定，每个目录的子文件/目录列表中的各个项的顺序不做规定 
- 程序由两个源文件构成，main.c(cpp) 和 my_print.asm， 其中main.c(cpp) 是主程序，可以使用 C/C++库，但是输出不能使用库函数，要求在my_print.asm中使用汇编编写函数用于输出。 
- 要求使用Makefile编译链接项目。
  - Windows 平台可使用CMake或其它构建工具。
- .img文件的名称可以直接在代码中指定(俗称硬编码)。 
- 要求根据FAT12文件系统格式直接读取.img中的二进制内容，不允许挂载镜像。 
- FAT12中名称均为大写，只需要输入为英文大写/数字的指定路径/文件名(即小写的文件/目录名为不存 在)，不考虑中文字符、不需要支持长文件名。
- 输入指令以回车符号结束，要求可以多次不断输入。 
- 程序应该对用户错误的输入做出恰当的提示，指出错误所在，不能崩溃

## 项目说明

1. code_cpp目录下的代码直接使用cpp提供的标准输出库进行输出
2. code_nasm目录下使用cpp和nasm的联合编译，用nasm编写的输出函数代替cpp的标准输出库进行输出。进入项目目录下，直接在终端输入make命令即可运行。
   